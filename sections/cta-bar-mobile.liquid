{{ 'cta-bar-mobile.css' | asset_url | stylesheet_tag }}

<h6 class="p">{{ product.title }}</h6>
<button class="btn {{ section.settings.btn_style }}" data-scroll-to-product>{{ section.settings.btn_text }}</button>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const bodyClass = "cta-bar__visible";
  
    const iObserver = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          document.body.classList.remove(bodyClass);
        } else {
          document.body.classList.add(bodyClass);
        }
      })
    });
  
    const $productFormPowder = document.querySelector('.product-form__section-wrapper');
    if ($productFormPowder) {
      iObserver.observe($productFormPowder);
    }
    const $productHeader = document.querySelector('.product-header');
    if ($productHeader) {
      iObserver.observe($productHeader);
    }
  });
</script>

{% schema %}
{
  "name": "Cta Bar Mobile",
  "class": "cta-bar-mobile",
  "settings": [
    {
      "type": "text",
      "id": "btn_text",
      "label": "Button Text",
      "default": "Jetzt bestellen"
    },
    {
      "type": "select",
      "id": "btn_style",
      "label": "Button Style",
      "options": [
        {
          "value": "",
          "label": "Default"
        },
        {
          "value": "btn--primary",
          "label": "Primary"
        },
        {
          "value": "btn--secondary",
          "label": "Secondary"
        },
        {
          "value": "btn--tertiary",
          "label": "Tertiary"
        },
        {
          "value": "btn--text",
          "label": "Text"
        }
      ],
      "default": "btn--primary"
    }
  ],
  "presets": [
    {
      "name": "Cta Bar Mobile"
    }
  ]
}
{% endschema %}